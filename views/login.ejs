<div>
    Checking availability...
</div>

<script type="text/javascript">
    // TODO: If the user is logged in, redirect to the home page


    let url = window.location.href;


    // remove route from url
    url = url.replace(/\/[^\/]*$/, '');
    // remove hash from url
    url = url.replace(/#.*$/, '');
    // remove query string from url
    url = url.replace(/\?.*$/, '');
    // remove trailing slash
    url = url.replace(/\/$/, '');

    // if the url does not end with / then add /auth.html, otherwise auth.html
    if (!url.endsWith('/')) {
        url += '/';
    }

    url += 'auth.html';


    // uri encode the url
    url = encodeURIComponent(url);

    // redirect to the discord oauth2 page
    if (!window.user) {
        window.location = `https://discord.com/oauth2/authorize?client_id=1088061930897412107&redirect_uri=${url}&response_type=token&scope=identify%20guilds%20guilds.members.read`;
    }

</script>